# Pipelines

Pipelines are sets of image processing tools chained together in order to extract features from an image. Among these tools only some of them can be integrated into pipelines.

## Tools allowed inside pipelines

!!! note
    Some tools may be present in more than one category.

- **Exposure fixing**: Fix image exposure, the resulting image will be used for color analysis.
- **Feature extraction**: Tools to extract features from a segmented image.
- **Mask cleanup**: Cleans a coarse mask generated by threshold tools.
- **Pre-processing**: Transform the image to help segmentation, the image may not retain it's properties.  Changes here will be ignored when extracting features.
- **ROI (dynamic)**: Create a ROI after analyzing the image.
- **ROI (static)**: Create a ROI from coordinates.
- **Threshold**: Threshold tools.
- **White balance**: Tools to help change white balance, depending on where those tools are set in the pipeline they or may not be ignored when extracting features.

## Loading and saving pipelines

### Binary file *.tipp

Default binary format, non human readable.  
To save a pipeline in binary format use the **Save...** item in the **Pipeline** menu and select **tipp** as extension.  
To load a pipeline in binary format use the **Load...** item in the **Pipeline** menu.

### JSON

Equivalent to binary format but human readable. always backup your pipelines in this format in case backwards compatibility is broken.  
To save a pipeline in json format use the **Save...** item in the **Pipeline** menu and select **json** as extension.  
To load a pipeline in json format use the **Load...** item in the **Pipeline** menu, you have to set the extension selector to **json**.

### Python script

Finally a pipeline can be saved as a fully functioning Python script. This is so advanced users can modify it at wish. Python knowledge is required.  
To save a pipeline as a Python script use the **Save as Python script...** item in the **Pipeline** menu.  
Pipelines saved as Python scripts can not be loaded.

## Tutorial

In this section we're going to build a fully functioning pipeline starting from scratch using the tools provided by IPSO Phen.  
All files generated by in the tutorial are available in the *sample_pipelines* and *class_pipelines* folders.

!!! note
    Normally, we would run test on a random set of images before adding a tool to the pipeline. I usually run tests on a random selection of a 100 images while building the pipeline and on about a 1000 images when the pipeline is ready.

<iframe width="650" height="400" src="https://www.youtube.com/embed/0izyeEDvMSM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
